<template name="navigation">
  <ul class="navigation">
    {{#each nav_items }}
      {{> nav_item }}
    {{/each}}
  </ul>
</template>

<template name="nav_item">
    {{#with options }}
    <li class="{{ isActivePath path }}">
        {{#if canExpand }}
        <a href="#route-{{../name}}" class="expand" data-toggle="collapse">
            <span>{{contexts.page.title}}</span> {{> icon styles=nav.icon }}
        </a>
        <ul id="route-{{../name}}" class="collapse {{isExpanded}}">
            {{#each nav.children }}
            {{> child_nav_item }}
            {{/each}}
        </ul>
        {{else}}
        {{> nav_anchor title=contexts.page.title route=../name icon=nav.icon }}
        {{/if}}
    </li>
    {{/with}}
</template>

<template name="nav_anchor">
  <a href="{{pathFor route }}">
    <span>{{title}}</span> {{#if icon}}{{> icon styles=icon }}{{/if}}
  </a>
</template>

<template name="internalNavItem">
  <li class="{{ isActivePath path }}">
    {{#if canExpand }}
      <a href="#route-{{route}}" class="expand" data-toggle="collapse">
        <span>{{contexts.page.title}}</span> {{> icon iconClass=nav.icon }}
      </a>
      <ul id="{{route}}" class="collapse {{isExpanded}}">
        {{#each nav.children }}
          {{> childNavItem }}
        {{/each}}
      </ul>
    {{else}}
      {{> navAnchor title=contexts.page.title route=route icon=nav.icon }}
    {{/if}}
  </li>
</template>

<template name="childNavItem">
  <li class="{{ isActiveRoute route }}">
    {{#if canExpand }}
      <a href="#{{route}}" class="expand" data-toggle="collapse">
        <span>{{title}}</span>
      </a>
      <ul id="{{route}}" class="collapse {{isExpanded}}">
        {{#each children }}
          {{> childNavItem }}
        {{/each}}
      </ul>
    {{else}}
      {{> navAnchor route=route title=title }}
    {{/if}}
  </li>
</template>